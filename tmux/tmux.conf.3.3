set-option -g history-limit 10000 # default 2000
setw -g mode-keys emacs



set -g status-interval 3

set -g status-left "#{?window_zoomed_flag,ðŸ” ,}"
set -g status-right-length 60
set -g status-right "\
 #(top -bn1 -1 -w|sed -n 's/ %%Cpu/\\n%%Cpu/g;s/://g;/%%Cpu/p'\
|awk '{ \
if ($2 > 90) printf \"â–ˆ\"; \
else if ($2 > 80) printf \"â–‡\"; \
else if ($2 > 70) printf \"â–†\"; \
else if ($2 > 60) printf \"â–…\"; \
else if ($2 > 50) printf \"â–„\"; \
else if ($2 > 40) printf \"â–ƒ\"; \
else if ($2 > 25) printf \"â–‚\"; \
else if ($2 > 10) printf \"â–\"; \
else printf \" \" }')\
 #((cat /proc/loadavg && nproc)|awk '{printf $1}NR==1{printf \"âˆ•\"}END{print \"á´¸\"}')\
 #(free --mega | awk 'NR==2{printf \"%%.1fâˆ•%%.fá´³\", $3/1000, $2/1000}')\
 #(hostname) #S "

if-shell -b '[ "$(tmux -V | sed -En "s/^tmux[^0-9]*([.0-9]+).*/\1 >= 3.3/p" | bc)" = 1 ]' {
  set -g window-status-current-format "#[fg=#{@BASE_COLOR},bg=colour232] #Iâ€¢#W "
  set -g window-status-format "#[fg=colour232,bg=#{@BASE_COLOR}] #I #W "
  set -g pane-border-style "fg=#{@BASE_COLOR},bg=default"
  set -g pane-active-border-style "fg=#{@BASE_COLOR},bg=#{@BASE_COLOR}"
  set -g status-style "fg=colour232,bold,bg=#{@BASE_COLOR}"
  run-shell 'tmux set -g @BASE_COLOR $(printf "#%x%x%x\n" \
    `shuf -i 96-160 -n 1` \
    `shuf -i 96-160 -n 1` \
    `shuf -i 96-160 -n 1`)'
  set -g window-status-separator "â–‘"
}


